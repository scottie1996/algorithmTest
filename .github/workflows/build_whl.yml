name: Build & Upload Python Wheel

# on:
#   push:
#     tags:
#       - 'whl-v*'  # ä»…åœ¨æ‰“ç±»ä¼¼ whl-v0.1.0 è¿™æ ·çš„ tag æ—¶è§¦å‘
on:
  workflow_dispatch:  # ğŸ‘ˆ æš‚æ—¶æ”¹ä¸ºæ‰‹åŠ¨è§¦å‘

jobs:
  build_whl:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§¾ Checkout repository
        uses: actions/checkout@v3

      - name: ğŸ Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.8'

      - name: ğŸ“¦ Install wheel build tools
        run: pip install setuptools wheel

      - name: ğŸ›  Build wheel for operator_whl_test
        run: |
          cd operators_whl/operator_whl_test
          python setup.py bdist_wheel

      - name: ğŸš€ Upload .whl to GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          files: operators_whl/operator_whl_test/dist/*.whl
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
